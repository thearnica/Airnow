import {lockyOn} from "dom-locky";import {inTime, waterfall} from "./global";let unlock = 0;export const openPopup = (selector) => {  const page = document.querySelector('.airnow-page');  waterfall([    inTime(1, selector.classList.add("airnow-modal--animation")),    inTime(0, selector.classList.remove("airnow-modal--hidden")),    inTime(0, page.classList.add("airnow-page--no-scroll")),  ]);  unlock = lockyOn(selector);  selector.style.height = (window.innerHeight) + 'px';};export const closePopup = (selector) => {  const page = document.querySelector('.airnow-page');  waterfall([    inTime(0, page.classList.remove("airnow-page--no-scroll")),    inTime(300, selector.classList.remove("airnow-modal--animation")),    inTime(0, selector.classList.add("airnow-modal--hidden")),    inTime(0, () => selector.style.height = 0)  ]);  unlock && unlock();};export const setupPopupClose = (modal) => {  const button = modal.querySelector('.airnow-modal__close');  if (!button) {    return;  }  button.addEventListener('click', function (evt) {    evt.preventDefault();    closePopup(modal);  });  button.addEventListener('keydown', function (evt) {    evt.preventDefault();    if (evt.keyCode === 27) {      closePopup(modal);    }  });};export const setupPopup = (callButton, callModal, callback) => {  if (!callButton) {    return;  }  callButton.addEventListener('click', function (evt) {    evt.preventDefault();    if (callModal.classList.contains('airnow-modal--animation')) {      closePopup(callModal);    }    else {      callback && callback();      openPopup(callModal);    }  });  callButton.addEventListener('keydown', function (evt) {    evt.preventDefault();    if (evt.keyCode === 13) {      if (callModal.classList.contains('airnow-modal--animation')) {        closePopup(callModal);      }      else {        callback && callback();        openPopup(callModal);      }    }  });  setupPopupClose(callModal);};export const closeCurrentModal = () => {  const modal = document.querySelector('.airnow-modal--animation');  const page = document.querySelector('.airnow-page');  if (modal) {    waterfall([      inTime(0, page.classList.remove("airnow-page--no-scroll")),      inTime(300, modal.classList.remove("airnow-modal--animation")),      inTime(0, modal.classList.add("airnow-modal--hidden")),      inTime(0, () => modal.style.height = 0)    ]);    unlock && unlock();  }};